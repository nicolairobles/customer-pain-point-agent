# Story 1.2.1 â€“ Design Reddit API Wrapper Interface

## Purpose
Define a clear abstraction for Reddit data access that the agent and tests can depend on.

## Acceptance Criteria
- [x] Interface signature documented (methods, parameters, return schema) using docstrings or protocol classes.
- [x] Data model accommodates required fields: title, body, url, author, subreddit, timestamp, score.
- [x] Error handling strategy (exceptions vs error objects) is specified.
- [x] Pagination, rate limiting, and query parameter options outlined.
- [x] Design reviewed with backend team, and approval noted in project log.

## Test Criteria
- [x] **Design Review**: Run through example queries ensuring interface covers positive and negative cases.
- [x] **Schema Validation**: Serialize a sample response to JSON; confirm it matches planned Pydantic model.
- [x] **Traceability**: Update `docs/work-breakdown.md` link and ensure interface decisions captured in `docs/architecture.md`.

### Design Review Notes
- Positive: Query with multiple subreddits returns a list of dicts containing `title`, `body`, `url`, `author`, `subreddit`, `timestamp`, `score`, `comments`; total capped via `limit` and `per_subreddit` with relevance sorting.
- Negative/edges: Missing credentials: emits warning but client still constructs; broken subreddit fetch returns empty list after retries/backoff without raising; submissions without IDs are skipped during merge.
- Options verified: Handles `time_filter` passthrough, customizable subreddit list, and retry/backoff for transient failures with logging.

### Schema Validation Notes
- Added Pydantic schema check in `tests/test_reddit_tool.py::test_normalized_schema_matches_pydantic_model`, validating normalized tool output against the planned Reddit post model and JSON serialization.

### Traceability Notes
- Work breakdown now references the local story file path in `docs/project-mgmt/work-breakdown.md`.
- Architecture doc documents the Reddit tool interface contract, fields, and behavior in `docs/architecture.md`.
