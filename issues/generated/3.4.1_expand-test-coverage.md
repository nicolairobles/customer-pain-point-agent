# 3.4.1 â€“ Expand automated test coverage

## Summary (Work Breakdown)

- **Description:** Establish comprehensive automated testing, including integration and regression suites, to support production hardening.
- **Work Package:** 3.4 Comprehensive Testing
- **Duration:** 3 hours
- **Owner(s):** TBD

- **Context:** Unit coverage exists for Reddit tooling and key UI components, but integration paths (agent orchestration, multi-source flows) remain fragile. This story defines the testing strategy for Phase 3, ensuring confidence ahead of deployment.

## Acceptance Criteria
- [ ] Define target coverage thresholds (e.g., 85% statements) and integrate coverage reporting into CI (GitHub Actions or equivalent).
- [ ] Add integration tests that execute the agent with mocked providers, verifying orchestration logic, error aggregation, and UI rendering of mixed-success payloads.
- [ ] Introduce contract tests for external provider adapters (Reddit/Twitter/Google) to detect schema drift, storing fixtures under `tests/fixtures/`.
- [ ] Establish a regression checklist covering LangChain upgrades, Streamlit UI smoke tests, and dependency pin changes; publish in `docs/qa/regression-playbook.md`.

## Test Criteria
- [ ] **CI Pipeline:** Demonstrate green runs with coverage thresholds enforced (fail build on regression).
- [ ] **Mutation/Static Analysis:** Run `mutmut` or `python -m compileall` (minimum) to catch untested branches; document findings.
- [ ] **Manual QA:** Execute the regression checklist once, record pass/fail status, and attach evidence to the issue.

## Notes
- Coordinate with future Phase 4 deployment tasks so the test harness integrates with the release pipeline.
- Leverage pytest markers (`slow`, `integration`) to keep developer feedback loops fast while still enabling nightly full runs.


