# 1.3.6 – Upgrade LangChain runtime to v1

## Summary (Work Breakdown)

- **Description:** Refactor agent stack to support LangChain 1.x runnable API
- **Work Package:** 2.3.4 Agent Maintenance
- **Duration:** 4 hours
- **Owner(s):** TBD

- **Context:** Current implementation (stories 1.3.3–1.3.5) targets LangChain 0.0.x. When the dev environment auto-installs LangChain 1.x the Streamlit app fails (`AgentExecutor` no longer exported). This issue tracks the planned upgrade path once downstream agent work is ready.

## Acceptance Criteria
- [ ] Dependency pin updated to a vetted LangChain 1.x release (or split packages, e.g. `langchain-core`, `langchain-community`, `langchain-openai`) with notes in `requirements.txt`.
- [ ] `src/agent/orchestrator.py` and `src/agent/pain_point_agent.py` refactored to the LangChain runnable/executor APIs, including tool registration and LLM adapters.
- [ ] All agent unit tests (`tests/test_agent.py`) rewritten to mock the new interfaces; legacy stubs removed.
- [ ] Streamlit dev app runs end-to-end (query input → agent execution) without ImportError warnings.
- [ ] Architecture or upgrade doc captures migration steps and rollback plan.

## Test Criteria
- [ ] **Unit Tests:** Updated suite passes locally and in CI under the new LangChain version.
- [ ] **Integration Test:** Execute `streamlit run app/streamlit_app.py` and confirm the “Analyze” button returns mock agent data without errors.
- [ ] **Regression Test:** Run core tool tests (`pytest tests/test_reddit_tool.py tests/test_agent.py`) to ensure downstream tooling still loads.

## Notes
- Schedule this work after remaining 1.3.x agent stories are complete so we refactor once.
- See issue 0.2.1 (Dependabot/Renovate evaluation) for automated dependency monitoring follow-up.

