# 2.2.4 – Write unit tests for Google tool

## Summary (Work Breakdown)

- **Description:** Add regression suite for Google search integration
- **Work Package:** 3.2.4 Google Tool Testing
- **Duration:** 2 hours
- **Story Points:** 2
- **Owner(s):** Amanda

- **Story Detail:** https://github.com/nicolairobles/customer-pain-point-agent/blob/master/docs/stories/2.2.4-write-unit-tests-for-google-tool.md

## Detailed Story

# Story 2.2.4 – Write unit tests for Google tool

## Purpose
Provide regression-resistant automated tests for the Google search tool and parser to safeguard against API or schema changes.

## Acceptance Criteria
- [ ] Tests exercise success, zero-result, quota-exceeded, and malformed response scenarios.
- [ ] Fixtures use sanitized sample responses saved under `tests/fixtures/google/`.
- [ ] Assertions verify that logging omits API keys while still including correlation identifiers and latency metrics.
- [ ] Coverage report shows ≥80% line coverage for Google search modules.
- [ ] Tests run as part of CI without making live network calls by default.

## Test Criteria
- [ ] **Pytest Suite**: New tests reside under `tests/test_google_tool.py` (or equivalent) with clear naming and parametrization.
- [ ] **CI Dry Run**: Execute `pytest` locally with `-k google` to confirm deterministic behavior and no external dependencies.
- [ ] **Failure Injection Test**: Temporarily modify normalization logic to ensure tests fail when schema expectations change.

